<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ resident.first_name }} {{ resident.last_name }}'s Medication Schedule</title>
    <link href="{% static 'css/output.css' %}" rel="stylesheet">

    <style>
        /* Reguły dla mediów drukowanych */
        @media print {
            /* Ukryj przyciski edit/delete */
            .print-hide {
                display: none;
            }

            /* Ukryj linki URL */
            a {
                text-decoration: none;
                color: black;
            }
        }
    </style>

    <script>
        // Funkcja do drukowania harmonogramu leków
        function printMedications() {
            const printContent = document.getElementById('medication-schedule').innerHTML;
            const originalContent = document.body.innerHTML;
            document.body.innerHTML = printContent;
            window.print();
            document.body.innerHTML = originalContent;
        }
    </script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-6">
        <!-- Nagłówek z imieniem i nazwiskiem mieszkańca -->
        <h1 class="text-4xl font-bold text-gray-900 mb-4">{{ resident.first_name }} {{ resident.last_name }}</h1>

        <!-- Informacje o mieszkańcu -->
        <p class="text-lg text-gray-700 mb-2">
            <strong>Date of Birth:</strong> {{ resident.date_of_birth }}
        </p>
        <p class="text-lg text-gray-700 mb-2">
            <strong>Room Number:</strong> {{ resident.room_number }}
        </p>
        <p class="text-lg text-gray-700 mb-4">
            <strong>Medical Conditions:</strong> {{ resident.medical_conditions }}
        </p>

        <!-- Harmonogram leków -->
        <div id="medication-schedule" class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Medication Schedule</h2>
            <ul class="list-disc pl-5 space-y-2">
                {% for entry in entries %}
                <li class="bg-gray-100 p-4 rounded-lg shadow-sm">
                    <p class="text-lg text-gray-800">
                        <span class="font-semibold">{{ entry.medication.trade_name }}</span> ({{ entry.time_of_day }}): {{ entry.dosage }}
                        from {{ entry.start_date }}{% if entry.end_date %} to {{ entry.end_date }}{% endif %}
                    </p>
                    <!-- Linki do edycji i usunięcia -->
                    <div class="flex space-x-4 mt-2 print-hide">
                        <a href="{% url 'edit_medication_entry' entry.id %}" class="text-blue-500 hover:text-blue-700">Edit</a>
                        <a href="{% url 'delete_medication_entry' entry.id %}" class="text-red-500 hover:text-red-700">Delete</a>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Przycisk Drukuj -->
        <div class="mt-6 print-hide">
            <button onclick="printMedications()" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600">Print Medication Schedule</button>
        </div>

        <!-- Przyciski akcji -->
        <div class="mt-6 space-x-4 print-hide">
            <a href="{% url 'add_medication_entry' resident.id %}" class="inline-block bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600">Add Medication</a>
            <a href="{% url 'resident_update' resident.pk %}" class="inline-block bg-yellow-500 text-white px-4 py-2 rounded-md hover:bg-yellow-600">Edit</a>
            <a href="{% url 'resident_delete' resident.pk %}" class="inline-block bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600">Delete</a>
            <a href="{% url 'resident_list' %}" class="inline-block bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600">Back to list</a>
        </div>
    </div>
</body>
</html>
